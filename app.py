import streamlit as st
import google.generativeai as genai

# –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –∫–ª—é—á –∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤ Streamlit
api_key = st.secrets.get("GEMINI_API_KEY")

if api_key:
    genai.configure(api_key=api_key)
    model = genai.GenerativeModel('gemini-1.5-flash')
else:
    st.error("–û—à–∏–±–∫–∞: API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ Secrets!")

st.set_page_config(page_title="Conflict AI", page_icon="üïäÔ∏è")

st.title("üïäÔ∏è AI –ö–æ–Ω—Ñ–ª–∏–∫—Ç-–¢—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä")
st.write("–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–µ—Ä–µ–ø–∏—Å–æ–∫.")

user_input = st.text_area("–í—Å—Ç–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç–µ–±—è –∑–∞–¥–µ–ª–æ:")

if st.button("–†–∞–∑—Ä—è–¥–∏—Ç—å –æ–±—Å—Ç–∞–Ω–æ–≤–∫—É"):
    if user_input:
        with st.spinner('–ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–¥—Ç–µ–∫—Å—Ç...'):
            # –¢–æ—Ç —Å–∞–º—ã–π "–Ω–µ–ø—Ä–æ–±–∏–≤–∞–µ–º—ã–π" –ø—Ä–æ–º–ø—Ç
            prompt = f"""
            –¢—ã ‚Äî –æ–ø—ã—Ç–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–ª–æ–≥ –∏ —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –Ω–µ–Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –æ–±—â–µ–Ω–∏—é. 
            –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ–æ–±—â–µ–Ω–∏–µ: "{user_input}"
            
            –í—ã–¥–∞–π –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
            ### üîç –ê–Ω–∞–ª–∏–∑
            * **–≠–º–æ—Ü–∏—è:** (—á—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç –∞–≤—Ç–æ—Ä)
            * **–°–∫—Ä—ã—Ç–∞—è –±–æ–ª—å:** (–∫–∞–∫–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –Ω–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∞)
            
            ### üõ° –°–º—è–≥—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
            (–ö–∞–∫ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–≤—É—á–∞–ª–æ –±—ã, –µ—Å–ª–∏ –±—ã –∞–≤—Ç–æ—Ä –±—ã–ª —Å–ø–æ–∫–æ–π–Ω—ã–º –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–º)
            
            ### üí° –ö–∞–∫ –æ—Ç–≤–µ—Ç–∏—Ç—å?
            * **–í–∞—Ä–∏–∞–Ω—Ç 1 (–≠–º–ø–∞—Ç–∏—è):** (–ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç—ã —Å–ª—ã—à–∏—à—å —á—É–≤—Å—Ç–≤–∞ –¥—Ä—É–≥–æ–≥–æ)
            * **–í–∞—Ä–∏–∞–Ω—Ç 2 (–ì—Ä–∞–Ω–∏—Ü—ã):** (–≤–µ–∂–ª–∏–≤–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≥—Ä–µ—Å—Å–∏—é)
            * **–í–∞—Ä–∏–∞–Ω—Ç 3 (–†–µ—à–µ–Ω–∏–µ):** (–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Ç—É–∞—Ü–∏–∏)
            """
            
            try:
                response = model.generate_content(prompt)
                st.markdown(response.text)
            except Exception as e:
                st.error(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ò–ò.")
    else:
        st.warning("–ü–æ–ª–µ –≤–≤–æ–¥–∞ –ø—É—Å—Ç–æ–µ.")
